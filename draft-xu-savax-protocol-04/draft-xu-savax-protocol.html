<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Communication Protocol Between the AD Control Server and the AD Edge Router of Inter-Domain Source Address Validation Architecture</title>
<meta content="Ke Xu" name="author">
<meta content="Jianping Wu" name="author">
<meta content="Xiaoliang Wang" name="author">
<meta content="Yangfei Guo" name="author">
<meta content="
       Because the Internet forwards packets according to the IP destination address, packet forwarding typically takes place without inspection of the source address and malicious attacks have been launched using spoofed source addresses. The inter-domain source address validation architecture is an effort to enhance the Internet by using state machine to generate consistent tags. When communicating between two end hosts at different ADs of IPv6 network, tags will be added to the packets to identify the authenticity of the IPv6 source address. 
       This memo focus on the data plane of the SAVA-X mechanism. 
    " name="description">
<meta content="xml2rfc 3.17.1" name="generator">
<meta content="draft-xu-savax-protocol-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.17.1
    Python 3.11.3
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.2
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.30.0
    setuptools 67.7.2
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="draft-xu-savax-protocol.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">savax-protocol</td>
<td class="right">May 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Xu, et al.</td>
<td class="center">Expires 23 November 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-xu-savax-protocol-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-05-22" class="published">22 May 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-11-23">23 November 2023</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Xu</div>
<div class="org">Tsinghua University</div>
</div>
<div class="author">
      <div class="author-name">J. Wu</div>
<div class="org">Tsinghua University</div>
</div>
<div class="author">
      <div class="author-name">X. Wang</div>
<div class="org">Tsinghua University</div>
</div>
<div class="author">
      <div class="author-name">Y. Guo</div>
<div class="org">ZGC Lab</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Communication Protocol Between the AD Control Server and the AD Edge Router of Inter-Domain Source Address Validation Architecture</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Because the Internet forwards packets according to the IP destination address, packet forwarding typically takes place without inspection of the source address and malicious attacks have been launched using spoofed source addresses. The inter-domain source address validation architecture is an effort to enhance the Internet by using state machine to generate consistent tags. When communicating between two end hosts at different ADs of IPv6 network, tags will be added to the packets to identify the authenticity of the IPv6 source address.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This memo focus on the data plane of the SAVA-X mechanism.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/BasilGuo/savax-protocol">https://github.com/BasilGuo/savax-protocol</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 23 November 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-terminology-and-abbreviatio" class="internal xref">Terminology and Abbreviation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-communication-protocol-form" class="internal xref">Communication Protocol Format</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-acs-acs-communication-proto" class="internal xref">ACS-ACS Communication Protocol</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-announcement-query-and-resp" class="internal xref">Announcement, Query and Response of State Machine Information</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="auto internal xref">4.1.1</a>.  <a href="#name-state-machine-information-a" class="internal xref">State Machine Information Announcement</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="auto internal xref">4.1.2</a>.  <a href="#name-state-machine-information-r" class="internal xref">State Machine Information Request</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-request-and-response-of-dia" class="internal xref">Request and Response of Diagnose Information</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-acs-aer-communication-proto" class="internal xref">ACS-AER Communication Protocol</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-deployment-request-and-resp" class="internal xref">Deployment, Request and Response of AD Registration information</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="auto internal xref">5.1.1</a>.  <a href="#name-deployment-of-ad-registrati" class="internal xref">Deployment of AD Registration Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="auto internal xref">5.1.2</a>.  <a href="#name-request-of-ad-registration-" class="internal xref">Request of AD Registration Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.3">
                    <p id="section-toc.1-1.5.2.1.2.3.1"><a href="#section-5.1.3" class="auto internal xref">5.1.3</a>.  <a href="#name-reponse-of-ad-registration-" class="internal xref">Reponse of AD Registration Information</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-deployment-request-and-repl" class="internal xref">Deployment, Request and Reply of AD Prefix Information</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="auto internal xref">5.2.1</a>.  <a href="#name-deployment-of-ad-prefix-inf" class="internal xref">Deployment of AD Prefix Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="auto internal xref">5.2.2</a>.  <a href="#name-request-of-ad-prefix-inform" class="internal xref">Request of AD Prefix Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="auto internal xref">5.2.3</a>.  <a href="#name-response-of-ad-prefix-infor" class="internal xref">Response of AD Prefix Information</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-deployment-request-and-respo" class="internal xref">Deployment, Request and Response of State Machine Information</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="auto internal xref">5.3.1</a>.  <a href="#name-deployment-of-state-machine" class="internal xref">Deployment of State Machine Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a href="#section-5.3.2" class="auto internal xref">5.3.2</a>.  <a href="#name-request-of-state-machine-in" class="internal xref">Request of State Machine Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.3">
                    <p id="section-toc.1-1.5.2.3.2.3.1"><a href="#section-5.3.3" class="auto internal xref">5.3.3</a>.  <a href="#name-response-of-state-machine-i" class="internal xref">Response of State Machine Information</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-request-and-response-of-kee" class="internal xref">Request and Response of Keep-alive Information</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.1">
                    <p id="section-toc.1-1.5.2.4.2.1.1"><a href="#section-5.4.1" class="auto internal xref">5.4.1</a>.  <a href="#name-request-of-keep-alive-infor" class="internal xref">Request of Keep-alive Information</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.2">
                    <p id="section-toc.1-1.5.2.4.2.2.1"><a href="#section-5.4.2" class="auto internal xref">5.4.2</a>.  <a href="#name-response-of-keep-alive-info" class="internal xref">Response of Keep-alive Information</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-deployment-of-tag-informati" class="internal xref">Deployment of Tag Information</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The Inter-Domain Source Address Validation (SAVA-X) mechanism establishes a trust alliance among Address Domains (AD), maintains a one-to-one state machine among ADs, generates a consistent tag, and deploys the tag to the ADs' border router (AER). The AER of the source AD adds a tag to identify the identity of the AD to the packet originating from one AD and sinking in another AD. The AER of the destination AD verifies the source address by validating the correctness of the tag to determine whether it is a packet with a forged source address.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">In the process of packet forwarding, if the source address and the destination address of this packet both are addresses in the trust alliance, however the tag is not added or incorrectly added, AER of the destination AD determines that the source address is forged and directly discards this packet. The destination AD forwards the packet directly for packets whose source address is an address outside the trust alliance.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document mainly studies the relevant specifications of the data plane of the inter-domain source address validation architecture mechanism between ADs, which will protect IPv6 networks from being forged source address. You could see <span>[<a href="#RFC8200" class="cite xref">RFC8200</a>]</span> for more details about IPv6. It stipulates the state machine, tag generation and update, tag processing in AER, and packet signature Its promotion and application can realize the standardization of  the data plane in the SAVA-X to facilitate the related equipment developed by different manufacturers and organizations to cooperate to accomplish the inter-domain source address validation jointly.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="terminology-and-abbreviation">
<section id="section-2.1">
        <h3 id="name-terminology-and-abbreviatio">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-terminology-and-abbreviatio" class="section-name selfRef">Terminology and Abbreviation</a>
        </h3>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Abbreviation</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">AD</td>
              <td class="text-left" rowspan="1" colspan="1">Address Domain, the unit of a trust alliance, which is an address set consisting of all IPv6 addresses corresponding to an IPv6 address prefix.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TA</td>
              <td class="text-left" rowspan="1" colspan="1">Trust Alliance, the IPv6 network that uses the SAVA-X mechanism.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ACS</td>
              <td class="text-left" rowspan="1" colspan="1">AD Control Server, the server that matains state machine with other ACS and distribute information to AER.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">AER</td>
              <td class="text-left" rowspan="1" colspan="1">AD border router, which is placed at the boundary of an AD of STA.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ADID</td>
              <td class="text-left" rowspan="1" colspan="1">The identity of an AD.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ADID_Rec</td>
              <td class="text-left" rowspan="1" colspan="1">The record of a number of an AD.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">ARI_Rec</td>
              <td class="text-left" rowspan="1" colspan="1">The record with relavent information of an AD or STA.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">API_Rec</td>
              <td class="text-left" rowspan="1" colspan="1">The record of prefix of an AD or STA.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SM</td>
              <td class="text-left" rowspan="1" colspan="1">State Machine, which is maintained by a pair of ACS to generate tags.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SMI_Rec</td>
              <td class="text-left" rowspan="1" colspan="1">The record of the state machine information.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Tag</td>
              <td class="text-left" rowspan="1" colspan="1">The authentic identification of source address of a packet.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<div id="pkt-format">
<section id="section-3">
      <h2 id="name-communication-protocol-form">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-communication-protocol-form" class="section-name selfRef">Communication Protocol Format</a>
      </h2>
<p id="section-3-1">Every AD should be placed at least one ACS, which is mainly responsible for maintaining the relationship between ADs of the trust alliance, establishing connections with other ACS, maintaining the synchronous state machine, and sending the generated tags to the AER. TCP is used for communicating between ACS-ACS and ACS-AER.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-general-communication-packe"></span><div id="fig-common-fmt">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-3-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Version    |    Alliance   | I Type| S Type|   Operation   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Total Length                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Number of Records                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Transaction Number                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Acknowledgement Number                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                              Data                             ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-general-communication-packe" class="selfRef">General communication packet format.</a>
        </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-3-3">
        <dt id="section-3-3.1">Version:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.2">
          <p id="section-3-3.2.1">8-bit, the current version=0b1 of SAVA-X.<a href="#section-3-3.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.3">Alliance:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.4">
          <p id="section-3-3.4.1">8-bit, the sub-trust alliance number.<a href="#section-3-3.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.5">I Type:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.6">
          <p id="section-3-3.6.1">4-bit, Information type, 0 for G_REF_INFO, 1 for AD_REG_INFO, 2 for AD_PREFIX_INFO, 3 for STATE_MACHINE_INFO, 4 for DIAGNOSIS_INFO, 5 for RUNNING_STATE_INFO, 6 for STRATEGY_INFO, 7 for ALIVE_INFO, 8 for TAG_INFO, 9 for ALLI_TAG_INFO, 10 for AD_V_TAG_INFO and others are unassigned.<a href="#section-3-3.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.7">S Type:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.8">
          <p id="section-3-3.8.1">4-bit, Session type, 1 for ANNOUNCEMENT or DEPLOYMENT, 2 for REQUEST, 3 for REQUEST_ALL, 4 for ACK, 5 for NAK, 6 for AACK, 7 for ANAK, 8 for RACK, 9 for RNAK and others are unassigned.<a href="#section-3-3.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.9">Operation:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.10">
          <p id="section-3-3.10.1">8-bit, the first 3 bits means for whether RENEW Type or not. First bit: 0 for non-RENEW packet, 1 for RENEW packet. Second bit: 0 for the first non-RENEW packet, 1 for the first RENEW packet. Third bit: 0 for the last non-RENEW packet, 1 for the last RENEW packet.<a href="#section-3-3.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.11">Total Length:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.12">
          <p id="section-3-3.12.1">32-bit, the length of this packet: from Version to Data.<a href="#section-3-3.12.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.13">Number of Records:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.14">
          <p id="section-3-3.14.1">32-bit, he records in Data.<a href="#section-3-3.14.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.15">Transaction Number:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.16">
          <p id="section-3-3.16.1">32-bit, this is the identification of a publication, query or response, and the value should increase monotonically. And different I Types <span class="bcp14">MUST</span> have its own Transaction Number. Through this field, ACS can locate which information has been resolved wrongly and corrected it.<a href="#section-3-3.16.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.17">Acknowledgement Number:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.18">
          <p id="section-3-3.18.1">32-bit, it is only be filled when S Type is ACK, NAK, AACK, ANAK, RACK or RNAK. Otherwise it is should be filled as 0.<a href="#section-3-3.18.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-3-3.19">Data:</dt>
        <dd style="margin-left: 1.5em" id="section-3-3.20">
          <p id="section-3-3.20.1">Variable-length field. I Type and S Type specifies data jointly.<a href="#section-3-3.20.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-3-4">When S Type is ANNOUNCEMENT:<a href="#section-3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-5.1">If I Type = AD_REG_INFO, Data field <span class="bcp14">SHOULD</span> be one or more ARI_Rec.<a href="#section-3-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.2">If I Type = AD_PREFIX_INFO, Data field <span class="bcp14">SHOULD</span> be one or more API_Rec.<a href="#section-3-5.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.3">If I Type = STATE_MACHINE_INFO, Data field <span class="bcp14">SHOULD</span> be one or more SMI_Rec.<a href="#section-3-5.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-5.4">If I Type = TAG_INFO, ALLI_TAG_INFO or AD_V_TAG_INFO, Data field <span class="bcp14">SHOULD</span> be one or more TAG_Rec.<a href="#section-3-5.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-6">When S Type is REQUEST or REQUEST_ALL:<a href="#section-3-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-7.1">If I Type = REG_INFO, Data field <span class="bcp14">SHOULD</span> be one or more ADID_Rec.<a href="#section-3-7.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-7.2">If I Type = AD_PREFIX_INFO, Data field <span class="bcp14">SHOULD</span> be none or one or more ADID_Rec.<a href="#section-3-7.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-7.3">If I Type = STATE_MACHINE_INFO, Data field <span class="bcp14">SHOULD</span> be none or one or more ADID_Rec.<a href="#section-3-7.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-7.4">If I Type = DIAGNOSE_INFO, Data field <span class="bcp14">SHOULD</span> be a 32-bit diagnose reqeust code.<a href="#section-3-7.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-7.5">If I Type = ALIVE_INFO, Data field <span class="bcp14">SHOULD</span> be none.<a href="#section-3-7.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-8">When S Type is ACK, AACK or RACK:<a href="#section-3-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-9.1">If I Type = REG_INFO, Data field <span class="bcp14">SHOULD</span> be one or more ARI_Rec.<a href="#section-3-9.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-9.2">If I Type = AD_PREFIX_INFO, Data field <span class="bcp14">SHOULD</span> be one or more API_Rec.<a href="#section-3-9.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-9.3">If I Type = STATE_MACHINE_INFO, Data field <span class="bcp14">SHOULD</span> be one or more SMI_Rec.<a href="#section-3-9.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-9.4">If I Type = DIAGNOSE_INFO, Data field <span class="bcp14">SHOULD</span> be one 32-bit diagnose response code.<a href="#section-3-9.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-9.5">If I Type = ALIVE_INFO, Data field <span class="bcp14">SHOULD</span> be none.<a href="#section-3-9.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-10">When S Type is NAK, ANAK or RNAK, Data field <span class="bcp14">SHOULD</span> be one 32-bit error code:<a href="#section-3-10" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-11.1">1 for parameters are wrong which means the packet cannot resolve correctly.<a href="#section-3-11.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-11.2">2 for member AD(s) in request packet does not exist in the designative sub-trust alliance.<a href="#section-3-11.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-11.3">3 for algorithm for State Machine set by source ACS cannot support by the destination ACS.<a href="#section-3-11.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="acs-acs-communication-protocol">
<section id="section-4">
      <h2 id="name-acs-acs-communication-proto">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-acs-acs-communication-proto" class="section-name selfRef">ACS-ACS Communication Protocol</a>
      </h2>
<p id="section-4-1">Since the blockchain is adopted in SAVA-X to maintain the information of the trust alliance, ACS can query the address domain information of relevant ADes of the trust alliance and the AD prefix information corresponding to the address domain from the blockchain.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="announcement-query-and-response-of-state-machine-information">
<section id="section-4.1">
        <h3 id="name-announcement-query-and-resp">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-announcement-query-and-resp" class="section-name selfRef">Announcement, Query and Response of State Machine Information</a>
        </h3>
<p id="section-4.1-1">State machine information record (SMI_Rec) represents the packet format used when state machine is negotiated between different ordered pairs of ADs. When an ordered pair of ADs is negotiating the state machine, ACS of AD with smaller ADID initiates the  communication and ACS of AD with larger ADID uses SMI_Rec determines the information to be used, such as initial state, tag generation algorithm, state transition interval, etc. Compared to ARI_Rec and API_Rec,SMI_Rec also needs an Expiring Time in addition to the Effecting Time. Expiration Time stands when the negotiated state machine is no longer valid.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<span id="name-format-of-state-machine-inf"></span><div id="fig-smi-rec">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-4.1-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+
|     Action    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Source ADID_Rec                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Destination ADID_Rec                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       State Mathine ID                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Algorithm            |             IS Length           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                        Initial State                          ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Transition Interval                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Effecting Time                         |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Expiring Time                          |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-format-of-state-machine-inf" class="selfRef">Format of state machine information record.</a>
          </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-4.1-3">
          <dt id="section-4.1-3.1">Action:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.2">
            <p id="section-4.1-3.2.1">8-bit, 1 for add or update this SMI_Rec.<a href="#section-4.1-3.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.3">Source ADID_Rec:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.4">
            <p id="section-4.1-3.4.1">Variable-length field. Refer to ADID_Rec <span>[<a href="#savax-control" class="cite xref">savax-control</a>]</span>.<a href="#section-4.1-3.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.5">Destination ADID_Rec:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.6">
            <p id="section-4.1-3.6.1">Variable-length field. Refer to ADID_Rec in <span>[<a href="#savax-control" class="cite xref">savax-control</a>]</span>.<a href="#section-4.1-3.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.7">State Mathine ID:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.8">
            <p id="section-4.1-3.8.1">32-bit, the ID used to identify the state machine, which is unique to a specific ordered AD pair and grows monotonically in use. It is used to distinguish the sequence before and after the generation of multiple state machines.<a href="#section-4.1-3.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.9">Algorithm:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.10">
            <p id="section-4.1-3.10.1">16-bit, algorithm used in A-Box. 1 for KISS-99 32-bit, 2 for KISS-99 64-bit Joint, 3 for OTP-2289 MD5 and others are unassigned.<a href="#section-4.1-3.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.11">IS Length:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.12">
            <p id="section-4.1-3.12.1">16-bit, the length of Initial State field.<a href="#section-4.1-3.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.13">Initial State:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.14">
            <p id="section-4.1-3.14.1">Variable-length field, the length of this filed is determined by IS Length.<a href="#section-4.1-3.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.15">Transition Interval:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.16">
            <p id="section-4.1-3.16.1">32-bit, the milliseconds of interval of state transition.<a href="#section-4.1-3.16.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.17">Effecting Time:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.18">
            <p id="section-4.1-3.18.1">64-bit, when this field is 0, it means this State Machine should be enabled after the last State Machine expired.<a href="#section-4.1-3.18.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-4.1-3.19">Expiring Time:</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-3.20">
            <p id="section-4.1-3.20.1">64-bit, the end of this State Machine.<a href="#section-4.1-3.20.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<div id="state-machine-information-announcement">
<section id="section-4.1.1">
          <h4 id="name-state-machine-information-a">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-state-machine-information-a" class="section-name selfRef">State Machine Information Announcement</a>
          </h4>
<p id="section-4.1.1-1">State machine information announcement (SM_INFO-Announce) is sent from source ACS to destination ACS. Source ACS fills in the following values for each field:<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
            <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">SM_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">ANNOUNCEMENT</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL: source ACS updates part of the state machines information to destination ACS. RENEW: source ACS updates all the state machines information to destination ACS.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">The number of SMI_Recs in Data field.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out where I Type is SM_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">One or more SMI_Recs.</td>
              </tr>
            </tbody>
          </table>
<p id="section-4.1.1-3">All SMI_Recs in Data field should have an unique SM_ID. When Action  is ADD and SM_ID bigger than current used SM_ID, ACS should add the  state machine defined in SMI_Rec. When Action is ADD and SM_ID equals  to current used SM_ID, ACS should modify the state machine defined in  SMI_Rec. Only Transition Interval and Expiring Time can be modified.  Other SMI_Rec should be discarded and destination ACS should send a  NAK message to source ACS.<a href="#section-4.1.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1.1-4">When receiving a non-RENEW packet, if it cannot resolve this message,  destination ACS should send a NAK message to source ACS. When  destination ACS can resolve the packet correctly, it <span class="bcp14">SHOULD</span>:<a href="#section-4.1.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1.1-5">
<li id="section-4.1.1-5.1">Compare the Transaction Number in this packet with Transaction  Number received from the same ACS before. Otherwise, destination ACS  would discard this packet and send a SM_INFO-Request to request the  lastest information of state machine. SM_INFO-Request is defined at  <a href="#SM_INFO-Request" class="auto internal xref">Section 4.1.2</a>. If bigger, destination ACS WOULD:<a href="#section-4.1.1-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.1-5.2">Accept every SMI_Rec and process them as following:
  - If the SM_ID in SMI_Rec equals to current used SM_ID, destination ACS would update the current used SM_ID.
  - If the SM_ID in SMI_Rec bigger than current used SM_ID, destination ACS would add this state machine to its following used state machine list.<a href="#section-4.1.1-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.1-5.3">And then destination ACS will send an SM_INFO-AACK message to source ACS.<a href="#section-4.1.1-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-4.1.1-6">When receiving a RENEW packet, if it cannot resolve this message, destination ACS should send a SM_INFO-ANAK message to source ACS. When destination ACS can resolve the packet correctly, it <span class="bcp14">SHOULD</span>:<a href="#section-4.1.1-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1.1-7">
<li id="section-4.1.1-7.1">Compare the Transaction Number in this packet with Transaction Number received from the same ACS before. Otherwise, destination ACS would discard this packet and send a SM_INFO-Request to request the lastest information of state machine. If bigger, destination ACS WOULD:<a href="#section-4.1.1-7.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.1-7.2">Accept every SMI_Rec and process them as following:
  - If the SM_ID in SMI_Rec equals to current used SM_ID, destination ACS would update the current used SM_ID.
  - If the SM_ID in SMI_Rec bigger than current used SM_ID,
 destination ACS would add this state machine to its following used state machine list. Especially, state machines will be     removed right now when they are not listed in the SMI_Recs but they are in using.<a href="#section-4.1.1-7.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.1-7.3">And then destination ACS will send an SM_INFO-AACK message to source ACS.<a href="#section-4.1.1-7.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-4.1.1-8">There are two types of reply of SM_INFO-Annouce message. That is SM_INFO-AACK representing affirmative acknowledgement and SM_INFO-ANAK representing negative acknowledgement. These are sent from destination ACS to source ACS. The mainly part of packet is filled by destination ACS as follows:<a href="#section-4.1.1-8" class="pilcrow">¶</a></p>
<table class="center" id="table-3">
            <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">SM_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">AACK if it is affirmative acknowledgement or ANAK if it is negative acknowledgement.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out where I Type is SM_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">The Transaction Number of the response corresponding request.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = AACK: None. S Type = ANAK: a 32-bit error code defined in <a href="#pkt-format" class="auto internal xref">Section 3</a>.</td>
              </tr>
            </tbody>
          </table>
<p id="section-4.1.1-10">Nothing needs to do when source ACS receives an SM_INFO-AACK message while it should regenerate a new state machine and announces to destination ACS when source ACS receives an SM_INFO-ANAK message.<a href="#section-4.1.1-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="SM_INFO-Request">
<section id="section-4.1.2">
          <h4 id="name-state-machine-information-r">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-state-machine-information-r" class="section-name selfRef">State Machine Information Request</a>
          </h4>
<p id="section-4.1.2-1">State machine information request (SM_INFO-Request) is sent from source ACS to destination ACS. Source ACS fills in the following values for each field:<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-4">
            <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">SM_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">REQUEST</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL: announce all state machine information to source ACS.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out where I Type is SM_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">None</td>
              </tr>
            </tbody>
          </table>
<p id="section-4.1.2-3">When source ACS receives a SM_INFO-Request message, it would send a SM_INFO-RNAK message to destination ACS if some fields are wrong. Otherwise, source ACS would send an SM_INFO-RACK message to destination ACS and process this SM_INFO-Request message. Source ACS should compare the Transaction Number in this message with Transaction Number received from the same destination ACS before. Otherwise, source ACS would discard this packet. If bigger, source ACS would send an SM_INFO-RACK message to destination ACS.<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
<p id="section-4.1.2-4">There are two types of reply of SM_INFO-Request message, i.e. SM_INFO-RACK representing affirmative acknowledgement and SM_INFO-RNAK representing negative acknowledgement. These are sent from source ACS to destination ACS. The mainly part of packet is filled by source ACS as follows: I Type is SM_INFO. S Type is RACK if it is affirmative acknowledgement or RNAK if it is negative acknowledgement. Operation is NULL. When S Type is RACK, Data field is a few of SMI_Recs. When S  Type is RNAK, Data field is a 32-bit error code.<a href="#section-4.1.2-4" class="pilcrow">¶</a></p>
<p id="section-4.1.2-5">When receiving a SM_INFO-RACK message, if it cannot resolve this message, destination ACS should send a SM_INFO-Request message to source ACS to acquire another state machine. When destination ACS can resolve the message correctly, it <span class="bcp14">SHOULD</span>:<a href="#section-4.1.2-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1.2-6">
<li id="section-4.1.2-6.1">Compare the Transaction Number in this packet with Transaction Number received from the same source ACS before. Otherwise, destination ACS would discard this packet and send a SM_INFO-Request to request the lastest information of state machine. If bigger, destination ACS WOULD:<a href="#section-4.1.2-6.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.2-6.2">Accept every SMI_Rec and process them as following:
  - If the SM_ID in SMI_Rec equals to current used SM_ID, destination ACS would update the current used SM_ID.
  - If the SM_ID in SMI_Rec bigger than current used SM_ID, destination ACS would add this state machine to its following used state machine list.<a href="#section-4.1.2-6.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.2-6.3">And then destination ACS will send an SM_INFO-AACK message to source ACS.<a href="#section-4.1.2-6.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-4.1.2-7">When receiving a SM_INFO-RNAK message, if it cannot resolve this message, destination ACS should send a SM_INFO-Request message to source ACS to acquire new state machine. When destination ACS can resolve the message correctly, it <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number received from the same source ACS before. Otherwise, destination ACS would discard this packet and send a SM_INFO-Request to request the lastest information of state machine. If bigger, destination ACS WOULD send a new correct SM_INFO-Request message to source ACS.<a href="#section-4.1.2-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="request-and-response-of-diagnose-information">
<section id="section-4.2">
        <h3 id="name-request-and-response-of-dia">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-request-and-response-of-dia" class="section-name selfRef">Request and Response of Diagnose Information</a>
        </h3>
<p id="section-4.2-1">Sent by destination ACS, request of diagnose information (DIAG_INFO-Request) is used to require the source ACS to check its configuration and source AERs' settings. Source ACS will response with its result. Destination ACS fills in the following values for each field:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-5">
          <caption><a href="#table-5" class="selfRef">Table 5</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field</th>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Version</td>
              <td class="text-left" rowspan="1" colspan="1">1</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Alliance</td>
              <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">I Type</td>
              <td class="text-left" rowspan="1" colspan="1">DIAG_INFO</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">S Type</td>
              <td class="text-left" rowspan="1" colspan="1">REQUEST</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Operation</td>
              <td class="text-left" rowspan="1" colspan="1">NULL</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Total Length</td>
              <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
              <td class="text-left" rowspan="1" colspan="1">0</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
              <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out where I Type is DIAG_INFO and ACS would keep it increasing monotonic.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
              <td class="text-left" rowspan="1" colspan="1">0</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Data</td>
              <td class="text-left" rowspan="1" colspan="1">a 32-bit error code defined below.</td>
            </tr>
          </tbody>
        </table>
<p id="section-4.2-3">Response of diagnose information (DIAG_INFO-Response) replys from source ACS to destination ACS.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<table class="center" id="table-6">
          <caption><a href="#table-6" class="selfRef">Table 6</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field</th>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Version</td>
              <td class="text-left" rowspan="1" colspan="1">1</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Alliance</td>
              <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">I Type</td>
              <td class="text-left" rowspan="1" colspan="1">DIAG_INFO</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">S Type</td>
              <td class="text-left" rowspan="1" colspan="1">ACK</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Operation</td>
              <td class="text-left" rowspan="1" colspan="1">NULL</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Total Length</td>
              <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
              <td class="text-left" rowspan="1" colspan="1">0</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
              <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out where I Type is DIAG_INFO and ACS would keep it increasing monotonic.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
              <td class="text-left" rowspan="1" colspan="1">The Transaction Number of the response corresponding request.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Data</td>
              <td class="text-left" rowspan="1" colspan="1">a 32-bit error code defined below.</td>
            </tr>
          </tbody>
        </table>
<p id="section-4.2-5">Before it sends the DIAG_INFO-Request message, the destination ACS should check its own configuration and gurantee they are correct.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">If it receives a DIAG_INFO-Request message, the source ACS would check the communication with its own AER whether correct or not.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.2-7">
<li id="section-4.2-7.1">If it's wrong, source ACS would reply a DIAG_INFO-Response message in which its Data filed is filled with 2 for fault cannot be repaired and alarm to administrator to deal with this problem.<a href="#section-4.2-7.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-7.2">If it's right, source ACS would RENEW all the registration information, prefix information and state machine information to its all AERs. After that, source ACS will reply a DIAG_INFO-Response message in which its Data filed is filled with 1 for all runs correctly after repairing.<a href="#section-4.2-7.2" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="acs-aer-communication-protocol">
<section id="section-5">
      <h2 id="name-acs-aer-communication-proto">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-acs-aer-communication-proto" class="section-name selfRef">ACS-AER Communication Protocol</a>
      </h2>
<p id="section-5-1">ACS would periodically deploy AD registration information, AD prefix information, and state machine information of relevant ADes to its all AERs to guarantee all information are latest. And ACS also would deploy the tag information to its all AERs periodically.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="deployment-request-and-response-of-ad-registration-information">
<section id="section-5.1">
        <h3 id="name-deployment-request-and-resp">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-deployment-request-and-resp" class="section-name selfRef">Deployment, Request and Response of AD Registration information</a>
        </h3>
<div id="deployment-of-ad-registration-information">
<section id="section-5.1.1">
          <h4 id="name-deployment-of-ad-registrati">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-deployment-of-ad-registrati" class="section-name selfRef">Deployment of AD Registration Information</a>
          </h4>
<p id="section-5.1.1-1">After connecting with AER, ACS deploys the AD Registration Information (REG_INFO-Deploy) to AER peroidically. I Type is REG_INFO. S Type is Announcement. Operation is NULL when some ADes' information are joined, left or updated and Operation is RENEW when all ADes' information are deployed. Acknowledgement is 0. Data field is one or more ARI_Rec.<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1.1-2">It should be noted that when there are two ARI_Recs in Data fields responding to the same AD, one may effect right now and the other effects after passing Effecting Time. When AER receives this message, all of them should be restored in the trust alliance list and AER <span class="bcp14">MUST</span> process them orderly. Since the protocol processes the records in sequence, it is required that the ARI_Rec effecting at the current time for the same member AD should appear in front of another updating ARI_Rec.<a href="#section-5.1.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1.1-3">When receiving a non-RENEW packet, if it cannot resolve this message, AER could send a REG_INFO-Request message to acquire the latest AD registration information.<a href="#section-5.1.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1.1-4">When AER can resolve this message correctly, it <span class="bcp14">SHOULD</span>:<a href="#section-5.1.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1.1-5">
<li id="section-5.1.1-5.1">Compare the Transaction Number in this packet with Transaction Number received from the same ACS before. If bigger, AER WOULD accept every ARI_Rec and process them as follows. Otherwise, AER would discard this packet and send a REG_INFO-RequestAll message to acquire the lastest information of AD registration information.<a href="#section-5.1.1-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.1-5.2">Process every ARI_Rec:
  - If Action is ADD and the record does not exist in its maintained trust alliance list, AER would add this record to its trust alliance list.
  - If Action is ADD and the record exists in its maintained trust alliance list but ACS Address is changed, AER would add this record to its trust alliance list and delete original record after passing Effecting Time in this ARI_Rec.
  - If Action is ADD and the record exists in its maintained trust alliance list and ACS Address is not changed, AER would do nothing.
  - If Action is DEL and the record exists in its maintained trust alliance list, AER would remove this record from its trust alliance list after passing Effecting Time in this ARI_Rec.<a href="#section-5.1.1-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.1-5.3">If a change is made in step 2, the update should take effect after passing the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.1.1-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.1.1-6">AER acts as following when receiving a RENEW packet. When ACS initiates RENEW, it would send a RENEW meesge with which the first bit of Operation field is 1. The second bit of Operation field identifies the begin of a procedure of RENEW and the third bit of Operation field identifies the end of a procedure of RENEW. ACS <span class="bcp14">MUST NOT</span> send a RENEW packet with which the first bit of Operation field is 0 in RENEWing. AER <span class="bcp14">MUST</span> process this procedure of RENEW after
received all RENEW packets.<a href="#section-5.1.1-6" class="pilcrow">¶</a></p>
<p id="section-5.1.1-7">When AER can resolve this packet correctly, it <span class="bcp14">SHOULD</span>:<a href="#section-5.1.1-7" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1.1-8">
<li id="section-5.1.1-8.1">Compare the Transaction Number in this packet with Transaction Number received from the same ACS before. If bigger, AER would accept every ARI_Rec and process them as follows. Otherwise, AER would discard this packet and send a REG_INFO-RequestAll message to acquire the lastest information of AD registration information.<a href="#section-5.1.1-8.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.1-8.2">Process every ARI_Rec:
- If the record does not exist in its maintained trust alliance list, AER would add this record to its trust alliance list.
- If the record exists in its maintained trust alliance list but ACS Address is changed, AER would add this record to its trust alliance list and delete original record after passing Effecting Time in this ARI_Rec.
- If the record exists in its maintained trust alliance list and ACS Address is not changed, AER would do nothing.
- If there are some records in the original trust alliance list that do not appear in the Data field during this RENEW process, they will be deleted immediately.<a href="#section-5.1.1-8.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.1-8.3">If a change is made in step 2, the update should take effect after passing the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.1.1-8.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="request-of-ad-registration-information">
<section id="section-5.1.2">
          <h4 id="name-request-of-ad-registration-">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-request-of-ad-registration-" class="section-name selfRef">Request of AD Registration Information</a>
          </h4>
<p id="section-5.1.2-1">The request is sent by AER to ACS. There are two types of request of AD Registration Information message. When querying the information of all member ADs of the trust alliance, the type is REG_INFO-RequestAll and REG_INFO-Request is used when querying the information of partial member ADs of the trust alliance.<a href="#section-5.1.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-7">
            <caption><a href="#table-7" class="selfRef">Table 7</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">REG_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">REQUEST: for querying partial member ADs and S Type is REQUEST_ALL: for querying all member ADs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = REQUEST: the number of ADID_Recs in Data field. S Type = REQUEST_ALL: 0.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. AER would maintain a global Transaction Number for packets sent out to ACS where I Type is REG_INFO and AER would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = REQUEST: one or more ADID_Recs. S Type = REQUEST_ALL: None.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.1.2-3">When processing REG_INFO-Request(ALL) message, ACS would reply REG_INFO-NAK to AER if it holds some fields are wrong. For example, AER requests one ARI_Rec that does not exist. Otherwise, REG_INFO-ACK message will be replyed. ACS WOULD process as follows:<a href="#section-5.1.2-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1.2-4">
<li id="section-5.1.2-4.1">ACS <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number received from the same AER before. If bigger, ACS would process as step 2. Otherwise, AER WOULD discard this packet and send a REG_INFO-NAK message to AER.<a href="#section-5.1.2-4.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.2-4.2">ACS processes every ADID_Rec. If the AD exists in its maintained trust alliance list, ACS would mark this record as "Reply". Otherwise ACS would mark this record as "Negative Reply". Especially, all records would be marked with "Reply" when Operation field is REQUEST_ALL.<a href="#section-5.1.2-4.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.2-4.3">If any case in step 2 is marked with "Negative Reply", ACS would construct a REG_INFO-NAK message to reply to the AER. Otherwise, a REG_INFO-ACK message is constructed to reply the AD registration information of all members marked with "Reply" to the AER.<a href="#section-5.1.2-4.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="reponse-of-ad-registration-information">
<section id="section-5.1.3">
          <h4 id="name-reponse-of-ad-registration-">
<a href="#section-5.1.3" class="section-number selfRef">5.1.3. </a><a href="#name-reponse-of-ad-registration-" class="section-name selfRef">Reponse of AD Registration Information</a>
          </h4>
<p id="section-5.1.3-1">AD registration information response includs two types. That is REG_INFO-ACK and REG_INFO-NAK. ACS will reply to AER according to the request of registration information sent by AER to ACS.<a href="#section-5.1.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-8">
            <caption><a href="#table-8" class="selfRef">Table 8</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">REG_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">ACK: representing affirmative acknowledgement. NAK: representing negative acknowledgement.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL: REG_INFO-Request message. RENEW: REG_INFO-RequestAll.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = ACK: the number of ARI_Recs in Data field. S Type = REQUEST_ALL: 0.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out to AER where I Type is REG_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">The Transaction Number of the response corresponding request.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = ACK: one or more ARI_Recs. S Type = NAK: a 32-bit error code defined at <a href="#pkt-format" class="auto internal xref">Section 3</a>. There is no boundary identification between these ARI_Recs, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.1.3-3">It should be noted that when there are two ARI_Recs in Data fields responding to the same AD, one may effect right now and the other effects after passing Effecting Time. When AER receives this message, all of them should be restored in the trust alliance list and AER <span class="bcp14">MUST</span> process them orderly. Since the protocol processes the records in sequence, it is required that the ARI_Rec effecting at the current time for the same member AD should appear in front of another updating ARI_Rec.<a href="#section-5.1.3-3" class="pilcrow">¶</a></p>
<p id="section-5.1.3-4">When receiving a non-RENEW REG_INFO-ACK message, if it holds that some fields are wrong, AER could send a REG_INFO-RequestAll message to acquire the latest AD registration information. Otherwise, AER would act as follows.<a href="#section-5.1.3-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1.3-5">
<li id="section-5.1.3-5.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number received from the same ACS before. If bigger, AER would process them as follows. Otherwise, AER would discard this packet and send a REG_INFO-RequestAll message to acquire the lastest information of AD registration information.<a href="#section-5.1.3-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.3-5.2">AER WOULD processes every ARI_Rec:
- If Action is ADD and the record does not exist in its maintained trust alliance list, AER would add this record to its trust alliance list.
  - If Action is ADD and the record exists in its maintained trust alliance list but ACS Address is changed, AER would add this record to its trust alliance list and delete original record after passing Effecting Time in this ARI_Rec.
  - If Action is ADD and the record exists in its maintained trust alliance list and ACS Address is not changed, AER would do nothing.
  - If Action is DEL and the record exists in its maintained trust alliance list, AER would remove this record from its trust alliance list after passing Effecting Time in this ARI_Rec.<a href="#section-5.1.3-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.3-5.3">If a change is made in step 2, the update should take effect after passing the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.1.3-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.1.3-6">AER acts as following when receiving a RENEW REG_INFO-ACK message. When ACS initiates RENEW, it would send a RENEW meesge with which the first bit of Operation field is 1. The second bit of Operation field identifies the begin of a procedure of RENEW and the third bit of Operation field identifies the end of a procedure of RENEW. ACS <span class="bcp14">MUST NOT</span> send a RENEW packet with which the first bit of Operation field is 0 in RENEWing. AER <span class="bcp14">MUST</span> process this procedure of RENEW after received all RENEW packets.<a href="#section-5.1.3-6" class="pilcrow">¶</a></p>
<p id="section-5.1.3-7">When AER can resolve this packet correctly, it <span class="bcp14">SHOULD</span>:<a href="#section-5.1.3-7" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.1.3-8">
<li id="section-5.1.3-8.1">Compare the Transaction Number in this packet with Transaction Number received from the same ACS before. If bigger, AER would accept every ARI_Rec and process them as step 2. Otherwise, AER would discard this packet and send a REG_INFO-RequestAll message to acquire the lastest information of AD registration information.<a href="#section-5.1.3-8.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.3-8.2">Process every ARI_Rec:
  - If the record does not exist in its maintained trust alliance list, AER would add this record to its trust alliance list.
  - If the record exists in its maintained trust alliance list but ACS Address is changed, AER would add this record to its trust alliance list and delete original record after passing Effecting Time in this ARI_Rec.
  - If the record exists in its maintained trust alliance list and ACS Address is not changed, AER would do nothing.
  -If there are some records in the original trust alliance list that do not appear in the Data field during this RENEW process, they will be deleted immediately.<a href="#section-5.1.3-8.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.1.3-8.3">If a change is made in step 2, the update should take effect after passing the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.1.3-8.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.1.3-9">When AER receives an REG_INFO-NAK message, it could send a REG_INFO-RequestAll message to ACS to acquire the latest AD registration information.<a href="#section-5.1.3-9" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="deployment-request-and-reply-of-ad-prefix-information">
<section id="section-5.2">
        <h3 id="name-deployment-request-and-repl">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-deployment-request-and-repl" class="section-name selfRef">Deployment, Request and Reply of AD Prefix Information</a>
        </h3>
<div id="deployment-of-ad-prefix-information">
<section id="section-5.2.1">
          <h4 id="name-deployment-of-ad-prefix-inf">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-deployment-of-ad-prefix-inf" class="section-name selfRef">Deployment of AD Prefix Information</a>
          </h4>
<p id="section-5.2.1-1">AD prefix information deployment (PFX_INFO-Deploy) is sent from ACS to AER. ACS fills in the following values for each field:<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-9">
            <caption><a href="#table-9" class="selfRef">Table 9</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">AD_PREFIX_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">DEPLOYMENT</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL: to publish partial update information of member ADs' prefix. RENEW: to publish all member ADs' prefix.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">The number of API_Recs in Data field.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out to AER where I Type is AD_PREFIX_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">One or more API_Recs. There is no boundary identification between these API_Recs, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.2.1-3">It should be noted that when there are two ARI_Recs in Data fields responding to the same AD, one may effect right now and the other is update message for ADD or DEL effecting after the Effecting Time. For example, if the current time is 5 and there are two records corresponding to the prefix P, in which the Effecting Time of record R1 is 1, the action is ADD, the Effecting Time of record R2 is 7 and the action is DEL, then it indicates that the prefix P is currently valid effective from time 1 and becomes invalid at time 7. When ACS or AER receives this message, all of them should be restored in the database and ACS should send them all when deploying. Since the protocol processes the records in sequence, it is required that the API_Rec effecting at the current time for the same member AD should appear in front of another updating API_Rec.<a href="#section-5.2.1-3" class="pilcrow">¶</a></p>
<p id="section-5.2.1-4">When receiving a non-RENEW PFX_INFO-Deploy message, if it holds that some fields are wrong, for example, it requires to delete a API_Rec that does not exist or to add some prefix that is conflict with other member ADs, AER could send a request message to acquire the latest AD prefix information. Otherwise, AER would act as follows.<a href="#section-5.2.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2.1-5">
<li id="section-5.2.1-5.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number received from the same ACS before. If bigger, AER WOULD process them as step 2. Otherwise, AER would discard this packet and send a PFX_INFO-RequestAll message to acquire the lastest information of AD prefix information.<a href="#section-5.2.1-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.1-5.2">AER processes every API_Rec:
  - If Action is ADD and the record does not exist in its maintained prefix list, AER would add this record to its prefix list.
  - If Action is ADD and the record exists in its maintained prefix list, AER would do nothing.
  - If Action is DEL and the record exists in its maintained prefix list, AER would remove this record from its prefix list after Effecting Time.<a href="#section-5.2.1-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.1-5.3">If a change is made in step 2, the update should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.2.1-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.2.1-6">AER acts as following when receiving a RENEW PFX_INFO-Deploy message. When ACS initiates RENEW, it would send a RENEW meesge with which the first bit of Operation field is 1. The second bit of Operation field identifies the begin of a procedure of RENEW and the third bit of Operation field identifies the end of a procedure of RENEW. ACS <span class="bcp14">MUST NOT</span> send a RENEW packet with which the first bit of Operation field is 0 in RENEWing. AER <span class="bcp14">SHOULD</span> uniformly process all packets in this RENEW process after receiving all RENEW packets.<a href="#section-5.2.1-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2.1-7">
<li id="section-5.2.1-7.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number received from the same ACS before. If bigger, AER WOULD process as step 2. Otherwise, AER would discard this message and send a PFX_INFO-RequestAll message to acquire the lastest information of AD prefix information.<a href="#section-5.2.1-7.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.1-7.2">AER processes every API_Rec:
  - If the record does not exist in its maintained prefix list, AER would add this record to its trust alliance list.
  - If the record exists in its maintained prefix list, AER would do nothing.
  - If there are some records in the original prefix list that do not appear in the Data field during this RENEW process, these records will be deleted immediately.<a href="#section-5.2.1-7.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.1-7.3">If a change is made in step 2, the update should take effect after passing the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.2.1-7.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="request-of-ad-prefix-information">
<section id="section-5.2.2">
          <h4 id="name-request-of-ad-prefix-inform">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-request-of-ad-prefix-inform" class="section-name selfRef">Request of AD Prefix Information</a>
          </h4>
<p id="section-5.2.2-1">AD prefix information request (PFX_INFO-RequestAll) is sent from AER to ACS to query some member ADs', including itself, all latest AD prefix information.<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2.2-2">AER fills in the following values for each field:<a href="#section-5.2.2-2" class="pilcrow">¶</a></p>
<table class="center" id="table-10">
            <caption><a href="#table-10" class="selfRef">Table 10</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">AD_PREFIX_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">REQUEST_ALL: querying from ACS the latest AD prefix information of all member ADs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. AER would maintain a global Transaction Number for packets sent out to ACS where I Type is AD_PREFIX_INFO and AER would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">None</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.2.2-4">When receiving a PFX_INFO-RequestAll message, if it holds that some fields are wrong, ACS could send a PFX_INFO-NAK. Otherwise, ACS would act as follows. The specific construction methods of PFX_INFO-ACK and PFX_INFO-NAK are described in <a href="#PFX_INFO-Response" class="auto internal xref">Section 5.2.3</a>.<a href="#section-5.2.2-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2.2-5">
<li id="section-5.2.2-5.1">ACS <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is PFX_INFO received from the same AER before. If bigger, ACS WOULD process them as step 2. Otherwise, ACS would discard this packet and send a PFX_INFO-NAK message.<a href="#section-5.2.2-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.2-5.2">ACS processes every ADID_Rec. If AD exists in the maintained trust alliance list, ACS would mark this record as "Reply". Otherwise, ACS wourld mark this rocord as "Negative Reply". Particularly, all records are marked with "Reply" when S Type is REQUEST_ALL.<a href="#section-5.2.2-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.2-5.3">If any case in step 2 is marked with "Negative Reply", ACS would construct a PFX_INFO-NAK message to reply to the AER. Otherwise, a PFX_INFO-ACK message is constructed to reply the AD prefix information of all members marked with "Reply" to the AER.<a href="#section-5.2.2-5.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="PFX_INFO-Response">
<section id="section-5.2.3">
          <h4 id="name-response-of-ad-prefix-infor">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-response-of-ad-prefix-infor" class="section-name selfRef">Response of AD Prefix Information</a>
          </h4>
<p id="section-5.2.3-1">AD prefix information response includs two types. That is PFX_INFO-ACK and PFX_INFO-NAK. According to the request sent by AER, if some fields are wrong, ACS will reply NAK, in which the error code is "parameter error". If a non-existent member AD is queried, the error code is "the requested member AD does not exist", which defined as before will not be repeated. The following mainly introduces PFX_INFO-ACK response. ACS fills in the following values for each field:<a href="#section-5.2.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-11">
            <caption><a href="#table-11" class="selfRef">Table 11</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">AD_PREFIX_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">ACK: representing affirmative acknowledgement. NAK: representing negative acknowledgement.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">RENEW: replying the latest AD prefix information to AER.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = ACK: the number of API_Rec in Data field. S Type = NAK: 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out to AER where I Type is AD_PREFIX_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">The Transaction Number of the response corresponding request.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = ACK: One or more latest requested API_Rec. S Type = NAK: a 32-bit error code defined in <a href="#pkt-format" class="auto internal xref">Section 3</a>. There is no boundary identification between these API_Recs, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.2.3-3">When receiving a non-RENEW PFX_INFO-ACK message which is the positive reply to the request of AD prefix sent from ACS to AER, if it holds that some fields are wrong, AER could send a request message to acquire the latest AD prefix information. Otherwise, AER would act as follows.<a href="#section-5.2.3-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2.3-4">
<li id="section-5.2.3-4.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is PFX_INFO received from the same ACS before. If bigger, AER would process them as follows. Otherwise, AER would discard this packet and send REG_INFO-RequestAll and PFX_INFO-RequestAll messages to acquire the lastest information.<a href="#section-5.2.3-4.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-4.2">AER processes every API_Rec:
  - If Action is ADD and the record does not exist in its maintained prefix list, AER would add this record to its prefix list.
  - If Action is ADD and the record exists in its maintained prefix list, AER would do nothing.
  - If Action is DEL and the record exists in its maintained prefix list, AER would remove this record from its prefix list after Effecting Time.<a href="#section-5.2.3-4.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-4.3">If a change is made in step 2, the update should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.2.3-4.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.2.3-5">AER acts as following when receiving a RENEW PFX_INFO-ACK message. When ACS initiates RENEW process, it would send a RENEW meesge with which the first bit of Operation field is 1. The second bit of Operation field identifies the begin of a procedure of RENEW and the third bit of Operation field identifies the end of a procedure of RENEW. ACS <span class="bcp14">MUST NOT</span> send a RENEW packet with which the first bit of Operation field is 0 in RENEW process. AER <span class="bcp14">SHOULD</span> uniformly process all packets in this RENEW process after receiving all RENEW packets.<a href="#section-5.2.3-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.2.3-6">
<li id="section-5.2.3-6.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is PFX_INFO received from the same ACS before. If bigger, AER WOULD process as step 2. Otherwise, AER would discard this message and send REG_INFO-RequestAll and PFX_INFO-RequestAll messages to acquire the lastest information.<a href="#section-5.2.3-6.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-6.2">AER processes every API_Rec. All Action in API_Recs is ADD during
RENEW process.
  - If the record does not exist in its maintained prefix list, AER would add this record to its trust alliance list.
  - If the record exists in its maintained prefix list, AER would do nothing.
  - If there are some records in the original prefix list that do not appear in the Data field during this RENEW process, these records will be deleted immediately.<a href="#section-5.2.3-6.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.2.3-6.3">If a change is made in step 2, the update message should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than current time or is all 0, it will take effect immediately.<a href="#section-5.2.3-6.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.2.3-7">When AER receives an PFX_INFO-NAK message, it could send REG_INFO-RequestAll and PFX_INFO-RequestAll messages to ACS to acquire the latest AD registration information and AD prefix information.<a href="#section-5.2.3-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="deployment-request-and-response-of-state-machine-information">
<section id="section-5.3">
        <h3 id="name-deployment-request-and-respo">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-deployment-request-and-respo" class="section-name selfRef">Deployment, Request and Response of State Machine Information</a>
        </h3>
<div id="deployment-of-state-machine-information">
<section id="section-5.3.1">
          <h4 id="name-deployment-of-state-machine">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-deployment-of-state-machine" class="section-name selfRef">Deployment of State Machine Information</a>
          </h4>
<p id="section-5.3.1-1">State machine information deployment (SM_INFO-Deploy) is sent from ACS to AER. ACS fills in the following values for each field:<a href="#section-5.3.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-12">
            <caption><a href="#table-12" class="selfRef">Table 12</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">SM_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">DEPLOYMENT</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL: to publish the partial update of state machine maintained by the pair of this AD and another AD and Operation is RENEW: to publish wholesome update of state machine maintained by the pair of this AD and another AD.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">The number of SMI_Recs in Data field</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent out to AER where I Type is SM_INFO and ACS would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">One or more SMI_Recs. There is no boundary identification between these ARI_Recs, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.3.1-3">It should be noted that state machine is responding to a ordered AD pair. The state machine information mastered by ACS includes the state machine information from this AD to another member AD, and the state machine information from another member AD to this AD. When ACS deployment is partially updated, only some changed or newly added state machines are deployed. When ACS deploys the update of RENEW message, it is necessary to deploy all existing and updated information. For the same ordered AD pair, there cannot be two or more SMI_Recs using the same SM_ID in Data field. In addition, there are two actions for SMI_Rec: one is to add a SM whose SM_ID is bigger than current using state machine. The second is to modify an existing state machine whose SM_ID equals to current using state machine. Both of them are using Action ADD. Here we requires only Transition Interval and Expiring Time can be updated.<a href="#section-5.3.1-3" class="pilcrow">¶</a></p>
<p id="section-5.3.1-4">When receiving a non-RENEW SM_INFO-Deploy message sent from ACS to AER, if it holds that some fields are wrong, for example, Action is DEL or SM_ID is smaller than current state machine in using, AER could send a request message to acquire the latest information. Otherwise, AER would act as follows.<a href="#section-5.3.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.3.1-5">
<li id="section-5.3.1-5.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is SM_INFO received from the same ACS before. If bigger, AER WOULD process them as step 2. Otherwise, AER would discard this packet and send REG_INFO-RequestAll and request messages to acquire the lastest information.<a href="#section-5.3.1-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.1-5.2">AER processes every SMI_Rec:
  - If SM_ID equals to the current using state machine, AER should update the state machine in use.
  - If SM_ID bigger than the current using state machine, AER should add this state machine to its list.<a href="#section-5.3.1-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.1-5.3">If a change is made in step 2, the update message should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.3.1-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.3.1-6">AER acts as following when receiving a RENEW SM_INFO-Deploy message. When ACS initiates RENEW process, it would send a RENEW meesge with which the first bit of Operation field is 1. The second bit of Operation field identifies the begin of a procedure of RENEW and the third bit of Operation field identifies the end of a procedure of RENEW. ACS <span class="bcp14">MUST NOT</span> send a RENEW packet with which the first bit of Operation field is 0 in RENEW process. AER <span class="bcp14">SHOULD</span> uniformly process all packets in this RENEW process after receiving all RENEW packets.<a href="#section-5.3.1-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.3.1-7">
<li id="section-5.3.1-7.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is SM_INFO received from the same ACS before. If bigger, AER WOULD process as step 2. Otherwise, AER would discard this message and send a request messages to acquire the lastest information.<a href="#section-5.3.1-7.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.1-7.2">AER processes every SMI_Rec.
  - If SM_ID equals to the current using state machine, AER should update the state machine in use.
  - If SM_ID bigger than the current using state machine, AER should add this state machine to its list.
  - If there are some records of state machines in use that do not appear in the Data field during this RENEW process, these state machines will be deleted immediately.<a href="#section-5.3.1-7.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.1-7.3">If a change is made in step 2, the update message should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than current time or is all 0, it will take effect immediately.<a href="#section-5.3.1-7.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="request-of-state-machine-information">
<section id="section-5.3.2">
          <h4 id="name-request-of-state-machine-in">
<a href="#section-5.3.2" class="section-number selfRef">5.3.2. </a><a href="#name-request-of-state-machine-in" class="section-name selfRef">Request of State Machine Information</a>
          </h4>
<p id="section-5.3.2-1">State machine information request (SM_INFO-Request) is sent from AER to ACS. AER fills in the following values for each field:<a href="#section-5.3.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-13">
            <caption><a href="#table-13" class="selfRef">Table 13</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">SM_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">REQUEST: querying the state machines maintained by the pair of this AD to another member AD and vice versa. These member ADs are specified by ADID_Rec defined in Data field. REQUEST_ALL: querying all state machines maintained by this AD with other member ADs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = REQUEST: the number of ADID_Rec in Data field. S Type = REQUEST_ALL: 0.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. AER would maintain a global Transaction Number for packets sent out to ACS where I Type is SM_INFO and AER would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = REQUEST: One or more ADID_Recs. S Type = REQUEST_ALL: none. There is no boundary identification between these ADID_Recs, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.3.2-3">For example, let this AD is AD1. When any ADID_Rec including in Data field, defined as AD2, it means that AER will request the SM(AD1, AD2) and SM(AD2, AD1). When ACS replies, it will reply these two state machines both.<a href="#section-5.3.2-3" class="pilcrow">¶</a></p>
<p id="section-5.3.2-4">When receiving a SM_INFO-Request(All) message, if it holds that some fields are wrong, ACS could send a PFX_INFO-NAK. Otherwise, ACS would act as follows. The specific construction methods of SM_INFO-ACK and SM_INFO-NAK are described in secion 3.2.3.3.<a href="#section-5.3.2-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.3.2-5">
<li id="section-5.3.2-5.1">ACS <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is SM_INFO received from the same AER before. If bigger, ACS WOULD process them as step 2. Otherwise, ACS would discard this packet and send a SM_INFO-NAK message.<a href="#section-5.3.2-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.2-5.2">ACS processes every ADID_Rec. If AD exists in the maintained trust alliance list, ACS would mark this record as "Reply". Otherwise, ACS wourld mark this rocord as "Negative Reply". Particularly, all records are marked with "Reply" when S Type is REQUEST_ALL.<a href="#section-5.3.2-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.2-5.3">If any case in step 2 is marked with "Negative Reply", ACS would construct a SM_INFO-NAK message to reply to the AER. Otherwise, a SM_INFO-ACK message is constructed to reply the state machine information of all members marked with "Reply" to the AER.<a href="#section-5.3.2-5.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="response-of-state-machine-information">
<section id="section-5.3.3">
          <h4 id="name-response-of-state-machine-i">
<a href="#section-5.3.3" class="section-number selfRef">5.3.3. </a><a href="#name-response-of-state-machine-i" class="section-name selfRef">Response of State Machine Information</a>
          </h4>
<p id="section-5.3.3-1">State machine information response includs two types. That is SM_INFO-ACK and SM_INFO-NAK. Both of them are sent from ACS to AER. ACS fills in the following values for each field:<a href="#section-5.3.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-14">
            <caption><a href="#table-14" class="selfRef">Table 14</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">SM_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">ACK: representing affirmative acknowledgement. NAK: representing negative acknowledgement.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">RENEW: replying the latest state machine information to AER.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = ACK: the number of SMI_Recs in Data field. S Type = NAK: 0.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent to AER where I Type is SM_INFO and would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">The Transaction Number of the response corresponding request.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">S Type = ACK: one or more latest requested SMI_Rec. S Type = NAK: a 32-bit error code defined in <a href="#pkt-format" class="auto internal xref">Section 3</a>. There is no boundary identification between these ADID_Recs, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.3.3-3">When receiving a non-RENEW SM_INFO-ACK message which is the positive reply to the request of AD prefix sent from ACS to AER, if it holds that some fields are wrong, AER could send a request message to acquire the latest state machine information. Otherwise, AER would act as follows.
1. AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is PFX_INFO received from the same ACS before. If bigger, AER WOULD process them as step 2. Otherwise, AER would discard this packet and send a SM_INFO-RequestAll message to acquire the lastest information.
2. AER processes every SMI_Rec:
  - If SM_ID equals to the current using state machine, AER should update the state machine in use.
  - If SM_ID bigger than the current using state machine, AER should add this state machine to its list.
3. If a change is made in step 2, the update should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than the current time or is all 0, it will take effect immediately.<a href="#section-5.3.3-3" class="pilcrow">¶</a></p>
<p id="section-5.3.3-4">AER acts as following when receiving a RENEW SM_INFO-ACK message. When ACS initiates RENEW process, it would send a RENEW meesge with which the first bit of Operation field is 1. The second bit of Operation field identifies the begin of a procedure of RENEW and the third bit of Operation field identifies the end of a procedure of RENEW. ACS <span class="bcp14">MUST NOT</span> send a RENEW packet with which the first bit of Operation field is 0 in RENEW process. AER <span class="bcp14">SHOULD</span> uniformly process all packets in this RENEW process after receiving all RENEW packets.<a href="#section-5.3.3-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.3.3-5">
<li id="section-5.3.3-5.1">AER <span class="bcp14">SHOULD</span> compare the Transaction Number in this packet with Transaction Number whose I Type is SM_INFO received from the same ACS before. If bigger, AER WOULD process as step 2. Otherwise, AER would discard this message and send a SM_INFO-RequestAll message to acquire the lastest information.<a href="#section-5.3.3-5.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.3-5.2">AER processes every API_Rec. All Action in API_Recs is ADD during RENEW process.
  - If SM_ID equals to the current using state machine, AER should update the state machine in use.
  - If SM_ID bigger than the current using state machine, AER should add this state machine to its list.
  - If there are some records of state machines in use that do not appear in the Data field during this RENEW process, these state machines will be deleted immediately.<a href="#section-5.3.3-5.2" class="pilcrow">¶</a>
</li>
            <li id="section-5.3.3-5.3">If a change is made in step 2, the update message should take effect after the Effecting Time, which acts on the data plane. If the Effecting Time is earlier than current time or is all 0, it will take effect immediately.<a href="#section-5.3.3-5.3" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-5.3.3-6">When AER receives an SM_INFO-NAK message, it could send a SM_INFO-RequestAll message to ACS to acquire the latest state machine information.<a href="#section-5.3.3-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="request-and-response-of-keep-alive-information">
<section id="section-5.4">
        <h3 id="name-request-and-response-of-kee">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-request-and-response-of-kee" class="section-name selfRef">Request and Response of Keep-alive Information</a>
        </h3>
<p id="section-5.4-1">In SAVA-X, ACS will periodically send Keep-alive request to query the availability of AER in SAVA-X mechanism.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<div id="request-of-keep-alive-information">
<section id="section-5.4.1">
          <h4 id="name-request-of-keep-alive-infor">
<a href="#section-5.4.1" class="section-number selfRef">5.4.1. </a><a href="#name-request-of-keep-alive-infor" class="section-name selfRef">Request of Keep-alive Information</a>
          </h4>
<p id="section-5.4.1-1">Keep-alive information request (ALIVE_INFO-Request) is sent by ACS to test the viability of AER. AER would reply to ACS when receiving a ALIVE_INFO-Request message. ACS considers that AER has gone wrong if it does not receive a response from AER within 60 seconds and ACS notifies the AD administrator of the failure information by email. ACS would keep sending ALIVE_INFO-Request to the fault AER at the same time. The filling values of each field in ACS request are as follows:<a href="#section-5.4.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-15">
            <caption><a href="#table-15" class="selfRef">Table 15</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">ALIVE_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">REQUEST</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. ACS would maintain a global Transaction Number for packets sent to AER where I Type is ALIVE_INFO and would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">None</td>
              </tr>
            </tbody>
          </table>
<p id="section-5.4.1-3">ACS considers that AER has gone wrong if it does not receive a response from AER within 60 seconds and ACS notifies the AD administrator of the failure information by email. ACS would consider that AER has recovered from failure when AER reply to the request correctly. ACS performs the following steps to update AER:<a href="#section-5.4.1-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5.4.1-4">
<li id="section-5.4.1-4.1">Keep time synchronization between AER and ACS.<a href="#section-5.4.1-4.1" class="pilcrow">¶</a>
</li>
            <li id="section-5.4.1-4.2">Deploy AD registration information, AD prefix information and state machine information to AER by the way of RENEW message.<a href="#section-5.4.1-4.2" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="response-of-keep-alive-information">
<section id="section-5.4.2">
          <h4 id="name-response-of-keep-alive-info">
<a href="#section-5.4.2" class="section-number selfRef">5.4.2. </a><a href="#name-response-of-keep-alive-info" class="section-name selfRef">Response of Keep-alive Information</a>
          </h4>
<p id="section-5.4.2-1">Keep-alive information response (ALIVE_INFO-Response) is sent by AER to reply the ALIVE_INFO-Request message.<a href="#section-5.4.2-1" class="pilcrow">¶</a></p>
<p id="section-5.4.2-2">In response to ALIVE_INFO-Request, AER fills in the following values for each field in the response:<a href="#section-5.4.2-2" class="pilcrow">¶</a></p>
<table class="center" id="table-16">
            <caption><a href="#table-16" class="selfRef">Table 16</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Field</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Version</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Alliance</td>
                <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">I Type</td>
                <td class="text-left" rowspan="1" colspan="1">ALIVE_INFO</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">S Type</td>
                <td class="text-left" rowspan="1" colspan="1">ACK</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Operation</td>
                <td class="text-left" rowspan="1" colspan="1">NULL</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Total Length</td>
                <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
                <td class="text-left" rowspan="1" colspan="1">The last Transaction Number add 1. AER would maintain a global Transaction Number for packets sent to ACS where I Type is ALIVE_INFO and would keep it increasing monotonic.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Data</td>
                <td class="text-left" rowspan="1" colspan="1">None</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="deployment-of-tag-information">
<section id="section-6">
      <h2 id="name-deployment-of-tag-informati">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-deployment-of-tag-informati" class="section-name selfRef">Deployment of Tag Information</a>
      </h2>
<p id="section-6-1">Tag information deployment (TAG_INFO-Deploy) is sent from ACS to AER and AER would add, verify and remove the tag to packet. When using sub trust alliance level tags and AD_V tags, the primary address domain ACS needs to distribute these two tags to the ACS of the boundary address domain first, and then the boundary address domain ACS will distribute these tags to their respective address domains' AERs. The sub trust alliance tag is used in the data plane to cross different address domain levels. The AD_V tag is used in the data plane when it is sent from the current address domain to the boundary address domain. Standard TAG_INFO is used in the data plane at the same level and under the same direct parent address field. The three types of tags use the same message format as follows.<a href="#section-6-1" class="pilcrow">¶</a></p>
<span id="name-format-of-tag-information-r"></span><div id="fig-tag-fmt">
<figure id="figure-3">
        <div class="alignLeft art-text artwork" id="section-6-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+
|     Action    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Source ADID_Rec                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Destination ADID_Rec                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Tag Len   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                             TAG                               ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Transition Interval                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-format-of-tag-information-r" class="selfRef">Format of tag information record.</a>
        </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-6-3">
        <dt id="section-6-3.1">Action:</dt>
        <dd style="margin-left: 1.5em" id="section-6-3.2">
          <p id="section-6-3.2.1">8-bit filed. 1 for add (ADD=1) and 2 for delete (DEL=2).<a href="#section-6-3.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.3">Source ADID_Rec:</dt>
        <dd style="margin-left: 1.5em" id="section-6-3.4">
          <p id="section-6-3.4.1">Variable-length field. Refer to ADID_Rec in <span>[<a href="#savax-control" class="cite xref">savax-control</a>]</span>.<a href="#section-6-3.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.5">Destination ADID_Rec:</dt>
        <dd style="margin-left: 1.5em" id="section-6-3.6">
          <p id="section-6-3.6.1">Variable-length field. Refer to ADID_Rec.<a href="#section-6-3.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.7">Tag Len:</dt>
        <dd style="margin-left: 1.5em" id="section-6-3.8">
          <p id="section-6-3.8.1">The length of TAG. The equation for calculation is (Tag Len + 1) * 8 bits. The length of TAG <span class="bcp14">MUST</span> be multiple times of 8 bits. The maximum length is 128 bits and the minimum length is 32 bits. So the minimum of Tag Len is 0011.<a href="#section-6-3.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.9">TAG:</dt>
        <dd style="margin-left: 1.5em" id="section-6-3.10">
          <p id="section-6-3.10.1">Variable-length field. The actual Tag or packet signature.<a href="#section-6-3.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.11">Transition Interval:</dt>
        <dd style="margin-left: 1.5em" id="section-6-3.12">
          <p id="section-6-3.12.1">32-bit, the milliseconds of interval of state transition.<a href="#section-6-3.12.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-6-4">When ACS announce tag to ACS or AER, it fills in the following values for each field:<a href="#section-6-4" class="pilcrow">¶</a></p>
<table class="center" id="table-17">
        <caption><a href="#table-17" class="selfRef">Table 17</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Field</th>
            <th class="text-left" rowspan="1" colspan="1">Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Version</td>
            <td class="text-left" rowspan="1" colspan="1">1</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Alliance</td>
            <td class="text-left" rowspan="1" colspan="1">The sub-trust alliance number.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">I Type</td>
            <td class="text-left" rowspan="1" colspan="1">TAG_INFO, ALLI_TAG_INFO or AD_V_TAG_INFO</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">S Type</td>
            <td class="text-left" rowspan="1" colspan="1">ANNOUNCEMENT</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Operation</td>
            <td class="text-left" rowspan="1" colspan="1">NULL</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Total Length</td>
            <td class="text-left" rowspan="1" colspan="1">The length of this message.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Number of Records</td>
            <td class="text-left" rowspan="1" colspan="1">The number of TAG_Rec in Data field.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Transaction Number</td>
            <td class="text-left" rowspan="1" colspan="1">ACS would maintain a global Transaction Number for packets sent to ACS or AER where I Type is TAG_INFO and would keep it increasing monotonic. Acknowledgement Number is 0.</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Acknowledgement Number</td>
            <td class="text-left" rowspan="1" colspan="1">0</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Data</td>
            <td class="text-left" rowspan="1" colspan="1">One or more TAG_Recs. There is no boundary identification between these records, which requires that the implementation of the protocol can process each record sequentially until the end of this message.</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">TBD.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">TBD.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC1760">[RFC1760]</dt>
        <dd>
<span class="refAuthor">Haller, N.</span>, <span class="refTitle">"The S/KEY One-Time Password System"</span>, <span class="seriesInfo">RFC 1760</span>, <span class="seriesInfo">DOI 10.17487/RFC1760</span>, <time datetime="1995-02" class="refDate">February 1995</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1760">https://www.rfc-editor.org/rfc/rfc1760</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5210">[RFC5210]</dt>
        <dd>
<span class="refAuthor">Wu, J.</span>, <span class="refAuthor">Bi, J.</span>, <span class="refAuthor">Li, X.</span>, <span class="refAuthor">Ren, G.</span>, <span class="refAuthor">Xu, K.</span>, and <span class="refAuthor">M. Williams</span>, <span class="refTitle">"A Source Address Validation Architecture (SAVA) Testbed and Deployment Experience"</span>, <span class="seriesInfo">RFC 5210</span>, <span class="seriesInfo">DOI 10.17487/RFC5210</span>, <time datetime="2008-06" class="refDate">June 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5210">https://www.rfc-editor.org/rfc/rfc5210</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
      <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8200">https://www.rfc-editor.org/rfc/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="savax-control">[savax-control]</dt>
      <dd>
<span class="refAuthor">Computer Science</span>, <span class="refAuthor">Wu, J.</span>, <span class="refAuthor">Computer Science</span>, and <span class="refAuthor">Institute for Network Sciences and Cyberspace</span>, <span class="refTitle">"Control Plane of Inter-Domain Source Address Validation Architecture"</span>, <time datetime="2023" class="refDate">2023</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgments">
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">TODO acknowledge.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ke Xu</span></div>
<div dir="auto" class="left"><span class="org">Computer Science, Tsinghua University</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:xuke@tsinghua.edu.cn" class="email">xuke@tsinghua.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jianping Wu</span></div>
<div dir="auto" class="left"><span class="org">Computer Science, Tsinghua University</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jianping@cernet.edu.cn" class="email">jianping@cernet.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Xiaoliang Wang</span></div>
<div dir="auto" class="left"><span class="org">Computer Science, Tsinghua University</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wangxiaoliang0623@foxmail.com" class="email">wangxiaoliang0623@foxmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yangfei Guo</span></div>
<div dir="auto" class="left"><span class="org">Zhongguancun Laboratory</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:guoyangfei@zgclab.edu.cn" class="email">guoyangfei@zgclab.edu.cn</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
